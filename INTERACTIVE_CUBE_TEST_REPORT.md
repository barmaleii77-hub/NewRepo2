# ?? ИНТЕРАКТИВНЫЙ 3D ТЕСТ - ОТЧЁТ

**Дата:** 3 Октября 2025  
**Цель:** Проверить работоспособность Qt Quick 3D с интерактивным управлением

---

## ? СОЗДАННЫЕ ФАЙЛЫ

### QML Сцена
**`test_cube_interactive.qml`**

**Компоненты:**
- ? Вращающийся красный куб (100 units)
- ? Координатные оси RGB (X=красная, Y=зелёная, Z=синяя)
- ? Опорная плоскость (серая, на уровне -60)
- ? 3 источника света (направленный, заливающий, ambient)
- ? Интерактивная камера (сферические координаты)

**Особенности:**
- ?? Камера управляется мышью (drag для вращения, wheel для зума)
- ?? Автоматическая анимация куба (вращение + наклон)
- ?? Информационная панель с параметрами камеры
- ?? Кнопка сброса вида
- ?? Статус-бар с индикаторами

### Python Приложение
**`test_cube_interactive.py`**

**Возможности:**
- Загрузка QML с проверкой ошибок
- Статус-бар с подсказками
- Детальный вывод в консоль
- Обработка ошибок

### PowerShell Скрипт
**`run_cube_test.ps1`**

**Функции:**
- Установка переменных окружения для отладки
- Запуск с D3D11 backend
- Цветной вывод инструкций
- Описание ожидаемого результата

---

## ?? ТЕХНИЧЕСКИЕ ДЕТАЛИ

### Камера (Сферические координаты)
```qml
property real cameraDistance: 400  // Расстояние от origin
property real cameraYaw: 30        // Горизонтальный угол
property real cameraPitch: 20      // Вертикальный угол

// Позиция рассчитывается из сферических координат:
position: Qt.vector3d(
    distance * cos(pitch) * sin(yaw),
    distance * sin(pitch),
    distance * cos(pitch) * cos(yaw)
)
```

**Преимущества:**
- ? Плавное вращение вокруг объекта
- ? Естественное управление мышью
- ? Постоянное расстояние до центра

### Управление мышью
```qml
MouseArea {
    // Drag для вращения
    onPositionChanged: {
        cameraYaw += deltaX * 0.5
        cameraPitch -= deltaY * 0.5
    }
    
    // Wheel для зума
    onWheel: {
        cameraDistance -= delta * 0.5
        // Ограничение: 100-1000 units
    }
}
```

### Анимация куба
```qml
// Основное вращение (Y axis)
SequentialAnimation on eulerRotation.y {
    from: 0; to: 360
    duration: 8000  // 8 секунд на оборот
    loops: Animation.Infinite
}

// Наклон (X axis)
SequentialAnimation on eulerRotation.x {
    from: -15; to: 15
    duration: 3000
    easing.type: Easing.InOutSine
    // Туда-обратно бесконечно
}
```

### Освещение
1. **Основной свет** - яркий, с тенями (45° слева-сверху)
2. **Заливающий** - слабый, синеватый (135° справа)
3. **Ambient** - общее освещение (30% яркости)

---

## ?? КАК ЗАПУСТИТЬ

### Вариант 1: Простой запуск
```powershell
C:\Users\Алексей\.venv\Scripts\python.exe test_cube_interactive.py
```

### Вариант 2: С отладкой
```powershell
powershell -ExecutionPolicy Bypass -File run_cube_test.ps1
```

---

## ?? ЧТО ДОЛЖНО БЫТЬ ВИДНО

### Визуальные элементы:

1. **Центр сцены:**
   - ? Красный куб (вращается)
   - ? Координатные оси (тонкие цилиндры)
   - ? Серая плоскость внизу

2. **UI Overlay:**
   - ? **Верх-лево:** Панель управления + параметры камеры
   - ? **Верх-право:** Кнопка RESET VIEW
   - ? **Низ-центр:** Статус-бар с индикаторами
   - ? **Низ-право:** FPS счётчик

3. **Фон:**
   - ? Фиолетово-серый (#2a2a3e)

### Поведение:

1. **Автоматическое:**
   - Куб плавно вращается вокруг Y
   - Куб слегка наклоняется (качается)

2. **При перетаскивании мыши:**
   - Камера вращается вокруг куба
   - Параметры Yaw/Pitch обновляются в панели

3. **При прокрутке колеса:**
   - Камера приближается/отдаляется
   - Distance обновляется (100-1000)

4. **При клике на RESET:**
   - Камера возвращается в позицию по умолчанию
   - Distance: 400, Yaw: 30°, Pitch: 20°

---

## ?? ВОЗМОЖНЫЕ РЕЗУЛЬТАТЫ

### ? Вариант A: ВСЁ РАБОТАЕТ
**Видно:**
- Вращающийся красный куб
- Координатные оси
- Плоскость
- Управление мышью работает

**Вывод:** Qt Quick 3D полностью функционален! ?

**Следующий шаг:** Исправить масштабы в основной сцене `assets/qml/main.qml`

---

### ?? Вариант B: ТОЛЬКО UI, БЕЗ КУБА
**Видно:**
- Фон правильного цвета
- UI панели и текст
- НО: куба, осей, плоскости НЕТ

**Вывод:** 3D объекты не рендерятся

**Следующий шаг:** 
- Проверить лог Qt (запустить `run_cube_test.ps1`)
- Попробовать другие RHI backends (opengl, vulkan)
- Обновить драйверы GPU

---

### ? Вариант C: ОШИБКА/КРАШ
**Видно:**
- Окно не открывается
- ИЛИ: ошибки в консоли
- ИЛИ: приложение вылетает

**Следующий шаг:**
- Изучить текст ошибки
- Проверить установку PySide6
- Запустить `diagnose_complete.py`

---

## ?? ПРЕИМУЩЕСТВА ЭТОГО ТЕСТА

1. **Интерактивность** - сразу видно, работает ли управление
2. **Наглядность** - множество визуальных элементов
3. **Информативность** - параметры камеры на экране
4. **Отладка** - легко проверить каждый компонент

---

## ?? ТЕХНИЧЕСКИЙ СТЕК

**Qt Quick 3D:**
- View3D (viewport)
- PerspectiveCamera (динамическая позиция)
- DirectionalLight (3 источника)
- Model (4 объекта: cube, plane, 3 axes)
- PrincipledMaterial (PBR материалы)

**Qt Quick:**
- MouseArea (навигация)
- Rectangle (UI панели)
- Text (информация)
- SequentialAnimation (анимация)

**Математика:**
- Сферические координаты для камеры
- Тригонометрия для позиционирования
- Ограничения диапазонов (clamping)

---

## ? ОЖИДАЕМЫЙ РЕЗУЛЬТАТ

После запуска вы должны увидеть:

```
????????????????????????????????????????????????????
?  [Info Panel]              [RESET VIEW]         ?
?                                                  ?
?               ?? Вращающийся                     ?
?                  красный куб                     ?
?              ?????? с осями                      ?
?                                                  ?
?  [Status: Qt Quick 3D | Mouse | Animation]  [FPS]?
????????????????????????????????????????????????????
```

И возможность вращать камеру мышью!

---

## ?? ГОТОВО К ТЕСТИРОВАНИЮ!

**Запустите:**
```powershell
python test_cube_interactive.py
```

**И сообщите результат:**
- ? "Куб вращается, управление работает" ? УСПЕХ!
- ?? "Только UI, куба нет" ? Проблема с 3D
- ? "Ошибка при запуске" ? Нужна диагностика

---

**Время создания:** ~20 минут  
**Файлов создано:** 3  
**Строк кода:** ~400  
**Статус:** ? **ГОТОВО К ТЕСТИРОВАНИЮ**
